(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{222:function(t,s,a){"use strict";a.r(s);var e=a(0),o=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"cookie-你咋还没整明白？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie-你咋还没整明白？"}},[t._v("#")]),t._v(" cookie 你咋还没整明白？")]),t._v(" "),a("h4",{attrs:{id:"_1-cookie-比较重要的属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-cookie-比较重要的属性"}},[t._v("#")]),t._v(" 1. cookie 比较重要的属性")]),t._v(" "),a("h5",{attrs:{id:"过期时间（expires）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#过期时间（expires）"}},[t._v("#")]),t._v(" 过期时间（expires）")]),t._v(" "),a("p",[a("code",[t._v("expires")]),t._v("的值是一个时间点（cookie失效时刻= expires）")]),t._v(" "),a("p",[a("code",[t._v("Expires")]),t._v(" 为 Cookie 的删除设置一个5分钟的过期的日期")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" d "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// in milliseconds")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo=bar;path=/;expires='")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toGMTString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("';'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// GMT 格式的时间")]),t._v("\n")])])]),a("h5",{attrs:{id:"存活时间（max-age）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#存活时间（max-age）"}},[t._v("#")]),t._v(" 存活时间（max-age）")]),t._v(" "),a("p",[a("code",[t._v("max-age")]),t._v(" 的值是一个以秒为单位时间段（cookie失效时刻= 创建时刻+ max-age）")]),t._v(" "),a("p",[a("code",[t._v("max-age")]),t._v(" 的默认值是 -1(即有效期为 session )；若max-age有三种可能值：负数、0、正数。负数：有效期session；0：删除cookie；正数：有效期为创建时刻+ max-age")]),t._v(" "),a("p",[a("code",[t._v("Max-age")]),t._v(" 设置一个 Cookie 将要过期的秒数")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo=bar;path=/;max-age='")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("';'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h5",{attrs:{id:"为什么有的过期时间是1969-？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么有的过期时间是1969-？"}},[t._v("#")]),t._v(" 为什么有的过期时间是1969 ？")]),t._v(" "),a("blockquote",[a("p",[t._v("1969-12-31T23:59:59.000Z")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1969-12-31T23:59:59.000Z'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -1000")]),t._v("\n")])])]),a("p",[t._v("根据测试的4款浏览器这种cookie的过期时间显示如下：")]),t._v(" "),a("ul",[a("li",[t._v("FireFox：会话")]),t._v(" "),a("li",[t._v("Safair：会话")]),t._v(" "),a("li",[t._v("Chrome：1969-12-31T23:59:59.000Z")]),t._v(" "),a("li",[t._v("Opera：1969-12-31T23:59:59.000Z")])]),t._v(" "),a("p",[t._v("这个cookie称为 Session Cookie ，将会一直存在直到关闭浏览器，（在不设置过期时间的情况下，这个是默认值）")]),t._v(" "),a("h5",{attrs:{id:"问：我应该设置哪个？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问：我应该设置哪个？"}},[t._v("#")]),t._v(" 问：我应该设置哪个？")]),t._v(" "),a("p",[t._v("答："),a("code",[t._v("expires")]),t._v("，浏览器实现比较好，所有浏览器会正确使用它来保存 Cookie，只需要记得像上边示例那样设置它的 GMT 时间就行了。")]),t._v(" "),a("h5",{attrs:{id:"domain-选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#domain-选项"}},[t._v("#")]),t._v(" domain 选项")]),t._v(" "),a("p",[t._v("指定了 cookie 将要被发送至哪个或哪些域中。默认情况下，domain 会被设置为创建该 cookie 的页面所在的域名，所以当给相同域名发送请求时该 cookie 会被发送至服务器。例如，")]),t._v(" "),a("p",[t._v("设置 .tujia.com")]),t._v(" "),a("ul",[a("li",[t._v("fvt.tujia.com")]),t._v(" "),a("li",[t._v("www.tujia.com")]),t._v(" "),a("li",[t._v("m.tujia.com")]),t._v(" "),a("li",[t._v("....tujia.com\n都可以使用")])]),t._v(" "),a("p",[t._v("但是设置了 .fvt.tujia.com")]),t._v(" "),a("ul",[a("li",[t._v("tujia.com")]),t._v(" "),a("li",[t._v("ddd.tujia.com\n不可以使用")])]),t._v(" "),a("p",[t._v("可以使用下面的语句在浏览器中尝试")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"example=2; expires=Mon, 11 Nov 2026 07:34:46 GMT; domain=test.com;path=/"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"example=2; expires=Mon, 11 Nov 2020 07:34:46 GMT; domain=test.com;path=/"')]),t._v("\n")])])]),a("p",[t._v("关于cookie域的详细讨论："),a("a",{attrs:{href:"https://stackoverflow.com/questions/1062963/how-do-browser-cookie-domains-work",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里stackoverflow"),a("OutboundLink")],1)]),t._v(" "),a("h5",{attrs:{id:"path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#path"}},[t._v("#")]),t._v(" path")]),t._v(" "),a("p",[t._v("path 选项值会与 /test，/test2 等等相匹配；任何以 /test 开头的选项都是合法的。需要注意的是，只有在 domain 选项核实完毕之后才会对 path 属性进行比较。path 属性的默认值是发送 Set-Cookie 消息头所对应的 URL 中的 path 部分")]),t._v(" "),a("p",[t._v("所以"),a("code",[t._v("domain")]),t._v("和"),a("code",[t._v("path")]),t._v("2个选项共同决定了cookie何时被浏览器自动添加到请求头部中发送出去。如果没有设置这两个选项，则会使用默认值。domain的默认值为设置该cookie的网页所在的域名，path默认值为设置该cookie的网页所在的目录。")]),t._v(" "),a("h5",{attrs:{id:"http-only-cookies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-only-cookies"}},[t._v("#")]),t._v(" HTTP-Only cookies")]),t._v(" "),a("p",[t._v("一般来说，只有服务器操作Cookie 才能保证一些必要的安全。但有时候，可能需要前端来增删改查 Cookie, 这个时候咱们的主角出现了——HttpOnly")]),t._v(" "),a("p",[a("code",[t._v("documen.coookie")]),t._v(" 不能读取到 当然也不能设置和更改")]),t._v(" "),a("h4",{attrs:{id:"_2-session-是啥？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-session-是啥？"}},[t._v("#")]),t._v(" 2.session 是啥？")]),t._v(" "),a("p",[t._v("session 的概念 ？")]),t._v(" "),a("p",[t._v("一个会话状态，不是实际存在的东西")]),t._v(" "),a("p",[t._v("session 的实现 ？")]),t._v(" "),a("p",[t._v("Session是在服务端保存的一个数据结构，用来跟踪用户的状态，这个数据可以保存在集群、数据库、文件中；")]),t._v(" "),a("p",[t._v("session id 存在前端浏览器的cookie 中，比如常说、的token")]),t._v(" "),a("p",[t._v("...")])])}),[],!1,null,null,null);s.default=o.exports}}]);